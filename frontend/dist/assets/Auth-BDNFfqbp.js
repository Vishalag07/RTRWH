var e=(e,s,t)=>new Promise((a,r)=>{var l=e=>{try{o(t.next(e))}catch(s){r(s)}},i=e=>{try{o(t.throw(e))}catch(s){r(s)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,i);o((t=t.apply(e,s)).next())});import{u as s,e as t,r as a,j as r}from"./react-vendor-BIG0dXTf.js";import{s as l}from"./api-CUAgWf1P.js";import{u as i,L as o}from"./index-DdHcYEUd.js";import{u as n,V as d}from"./VoiceAssistantUI-DgXj8NA7.js";import"./vendor-B0m_Fmqf.js";import"./framer-motion-CjfoqxEY.js";function c({email:e,setEmail:i,password:o,setPassword:n,name:d,setName:c,mode:m,setMode:x,login:h,register:u,submitting:g,message:b}){const{t:p}=s();t();const[f,j]=a.useState(localStorage.getItem("token"));a.useEffect(()=>{l(f)},[f]);const v=a.useMemo(()=>/.+@.+\..+/.test(e.trim()),[e]),w=a.useMemo(()=>o.length>=8,[o]),N=a.useMemo(()=>"login"===m||d.trim().length>0,[d,m]),_=v&&w&&N;return f?r.jsxs("div",{className:"flex items-center gap-3 bg-white/60 backdrop-blur-md border border-slate-200 rounded-full px-3 py-1 shadow-sm",children:[r.jsx("span",{className:"text-sm text-slate-600",children:p("auth.signed_in")}),r.jsx("button",{className:"text-sm px-3 py-1 rounded-full bg-slate-800 text-white hover:bg-slate-900 transition",onClick:function(){localStorage.removeItem("token"),j(null)},"aria-label":p("aria.logout"),children:p("auth.logout")})]}):r.jsx("div",{className:"w-full max-w-xl",children:r.jsxs("div",{className:"relative rounded-2xl border border-slate-200 bg-white shadow-lg overflow-hidden",children:[r.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-blue-500 to-indigo-500 opacity-10 pointer-events-none"}),r.jsxs("div",{className:"relative p-4 sm:p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-full",children:[r.jsx("button",{id:"login-toggle-btn",className:"px-3 py-1 text-sm rounded-full transition "+("login"===m?"bg-white shadow text-slate-900":"text-slate-600 hover:text-slate-900"),onClick:()=>x("login"),"aria-pressed":"login"===m,children:p("auth.login")}),r.jsx("button",{id:"register-toggle-btn",className:"px-3 py-1 text-sm rounded-full transition "+("register"===m?"bg-white shadow text-slate-900":"text-slate-600 hover:text-slate-900"),onClick:()=>x("register"),"aria-pressed":"register"===m,children:p("auth.register")})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("label",{className:"block text-sm text-slate-700 mb-1",htmlFor:"email",children:p("auth.email")}),r.jsx("input",{id:"email",className:"w-full rounded-lg border px-3 py-2 outline-none transition focus:ring-2 focus:ring-blue-500 "+(e&&!v?"border-red-400 focus:ring-red-500":"border-slate-300"),placeholder:p("auth.email_placeholder"),value:e,onChange:e=>i(e.target.value),type:"email","aria-label":p("aria.email"),"aria-invalid":!!e&&!v}),e&&!v&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:p("auth.email_invalid")})]}),"register"===m&&r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("label",{className:"block text-sm text-slate-700 mb-1",htmlFor:"name",children:p("auth.name")}),r.jsx("input",{id:"name",className:"w-full rounded-lg border px-3 py-2 outline-none transition focus:ring-2 focus:ring-blue-500 "+(d&&!N?"border-red-400 focus:ring-red-500":"border-slate-300"),placeholder:p("auth.name_placeholder"),value:d,onChange:e=>c(e.target.value),"aria-label":p("aria.name"),"aria-invalid":!!d&&!N}),d&&!N&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:p("auth.name_required")})]}),r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("label",{className:"block text-sm text-slate-700 mb-1",htmlFor:"password",children:p("auth.password")}),r.jsx("input",{id:"password",className:"w-full rounded-lg border px-3 py-2 outline-none transition focus:ring-2 focus:ring-blue-500 "+(o&&!w?"border-red-400 focus:ring-red-500":"border-slate-300"),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",type:"password",value:o,onChange:e=>n(e.target.value),"aria-label":p("aria.password"),"aria-invalid":!!o&&!w}),o&&!w&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:p("auth.password_invalid")})]})]}),b&&r.jsx("div",{className:"mt-3 text-sm "+("error"===b.type?"text-red-600":"text-green-600"),children:b.text}),r.jsx("div",{className:"mt-4 flex items-center justify-end gap-2",children:"register"===m?r.jsx("button",{disabled:!_||g,className:"px-4 py-2 rounded-lg text-white transition shadow "+(!_||g?"bg-slate-300 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"),onClick:u,"aria-label":p("aria.create_account"),children:p(g?"auth.creating_account":"auth.create_account")}):r.jsx("button",{disabled:!_||g,className:"px-4 py-2 rounded-lg text-white transition shadow "+(!_||g?"bg-slate-300 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"),onClick:h,"aria-label":p("aria.sign_in"),children:p(g?"auth.signing_in":"auth.sign_in")})})]})]})})}function m({size:e=36,withWordmark:s=!1}){const t=e;return r.jsxs("div",{className:"flex items-center gap-2 select-none",children:[r.jsxs("svg",{width:t,height:t,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg","aria-label":"RTRWH logo",children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"lg1",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#2563eb"}),r.jsx("stop",{offset:"100%",stopColor:"#4f46e5"})]}),r.jsxs("linearGradient",{id:"lg2",x1:"0",x2:"0",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#22c55e"}),r.jsx("stop",{offset:"100%",stopColor:"#0ea5e9"})]})]}),r.jsx("path",{d:"M32 6 C28 14 18 24 18 34 a14 14 0 0 0 28 0 c0-10-10-20-14-28z",fill:"url(#lg1)"}),r.jsxs("g",{transform:"translate(0,38)",children:[r.jsx("rect",{x:"10",y:"0",width:"44",height:"6",rx:"3",fill:"#94a3b8"}),r.jsx("rect",{x:"14",y:"8",width:"36",height:"6",rx:"3",fill:"#cbd5e1"}),r.jsx("rect",{x:"18",y:"16",width:"28",height:"6",rx:"3",fill:"url(#lg2)"})]}),r.jsx("circle",{cx:"44",cy:"14",r:"2",fill:"#93c5fd"})]}),s&&r.jsx("span",{className:"font-semibold tracking-tight text-slate-800",children:"RTRWH"})]})}function x(){const{t:l}=s(),x=t(),{login:h,register:u,isAuthenticated:g}=i(),[b,p]=a.useState(""),[f,j]=a.useState(""),[v,w]=a.useState(""),[N,_]=a.useState("login"),[y,k]=a.useState(!1),[C,S]=a.useState(null);function L(){return e(this,null,function*(){k(!0),S(null);try{(yield u(v.trim(),b.trim(),f))?(S({type:"success",text:l("auth.register_success")}),_("login")):S({type:"error",text:l("auth.register_failed")})}catch(e){S({type:"error",text:l("auth.register_failed")})}finally{k(!1)}})}function M(){return e(this,null,function*(){k(!0),S(null);try{(yield h(b.trim(),f))?(S({type:"success",text:l("auth.login_success")}),x("/dashboard")):S({type:"error",text:l("auth.login_failed")})}catch(e){S({type:"error",text:l("auth.login_failed")})}finally{k(!1)}})}a.useEffect(()=>{g&&x("/dashboard")},[g,x]),a.useEffect(()=>{"register"===new URLSearchParams(window.location.search).get("mode")&&_("register")},[]);const E={[l("voice_commands.set_email")]:e=>p(e),[l("voice_commands.set_password")]:e=>j(e),[l("voice_commands.set_name")]:e=>w(e),[l("voice_commands.switch_to_login")]:()=>_("login"),[l("voice_commands.switch_to_register")]:()=>_("register"),[l("voice_commands.login")]:M,[l("voice_commands.register")]:L,[l("voice_commands.go_home")]:()=>x("/")},{isListening:I,setIsListening:P,feedback:R}=n(E);return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsxs("header",{className:"max-w-6xl mx-auto px-6 py-8 flex justify-between items-center",children:[r.jsx("a",{href:"/",className:"inline-flex items-center gap-2 text-slate-700 hover:text-slate-900","aria-label":l("aria.back_to_home"),children:r.jsx(m,{size:32,withWordmark:!0})}),r.jsx(o,{})]}),r.jsx("main",{className:"max-w-6xl mx-auto px-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[r.jsxs("div",{className:"order-2 lg:order-1",children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:l("auth.welcome")}),r.jsx("p",{className:"text-slate-600 mb-4",children:l("auth.welcome_subtitle")}),r.jsx(c,{email:b,setEmail:p,password:f,setPassword:j,name:v,setName:w,mode:N,setMode:e=>{_(e),S(null)},login:M,register:L,submitting:y,message:C})]}),r.jsx("div",{className:"order-1 lg:order-2",children:r.jsx("div",{className:"relative rounded-3xl overflow-hidden border border-slate-200 bg-white shadow-xl",children:r.jsxs("div",{className:"relative p-6",children:[r.jsx("div",{className:"h-64 sm:h-80 rounded-2xl bg-gradient-to-br from-blue-50 to-indigo-50 border border-slate-200 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl",children:"ðŸ”‘"}),r.jsx("div",{className:"mt-2 text-slate-700",children:l("auth.secure_access_title")})]})}),r.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3 text-sm text-slate-600",children:[r.jsx("div",{className:"rounded-lg border border-slate-200 p-3 bg-white",children:l("auth.feature_1")}),r.jsx("div",{className:"rounded-lg border border-slate-200 p-3 bg-white",children:l("auth.feature_2")}),r.jsx("div",{className:"rounded-lg border border-slate-200 p-3 bg-white",children:l("auth.feature_3")}),r.jsx("div",{className:"rounded-lg border border-slate-200 p-3 bg-white",children:l("auth.feature_4")})]})]})})})]})}),r.jsx(d,{isListening:I,setIsListening:P,feedback:R})]})}export{x as Auth,x as default};
