var e=(e,t,s)=>new Promise((a,r)=>{var l=e=>{try{o(s.next(e))}catch(t){r(t)}},i=e=>{try{o(s.throw(e))}catch(t){r(t)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,i);o((s=s.apply(e,t)).next())});import{u as t,k as s,r as a,j as r,V as l}from"./react-vendor-CJ3VGwWI.js";import{s as i,u as o}from"./index-ZW20BDBo.js";import"./vendor-wFsWlTaG.js";import"./framer-motion-C2hfdD_N.js";function n({email:e,setEmail:o,password:n,setPassword:d,name:c,setName:m,mode:x,setMode:h,login:u,register:g,submitting:b,message:p}){const{t:f}=t();s();const[j,v]=a.useState(localStorage.getItem("token")),[w,N]=a.useState(!1);a.useEffect(()=>{i(j)},[j]);const y=a.useMemo(()=>/.+@.+\..+/.test(e.trim()),[e]),_=a.useMemo(()=>n.length>=8,[n]),k=a.useMemo(()=>"login"===x||c.trim().length>0,[c,x]),C=y&&_&&k;return j?r.jsxs("div",{className:"flex items-center gap-3 bg-white/60 backdrop-blur-md border border-slate-200 rounded-full px-3 py-1 shadow-sm",children:[r.jsx("span",{className:"text-sm text-slate-600",children:f("auth.signed_in")}),r.jsx("button",{className:"text-sm px-3 py-1 rounded-full bg-slate-800 text-white hover:bg-slate-900 transition",onClick:function(){localStorage.removeItem("token"),v(null)},"aria-label":f("aria.logout"),children:f("auth.logout")})]}):r.jsx("div",{className:"w-full max-w-xl",children:r.jsxs("div",{className:"relative rounded-2xl border border-slate-200 bg-white shadow-lg overflow-hidden",children:[r.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-blue-500 to-indigo-500 opacity-10 pointer-events-none"}),r.jsxs("div",{className:"relative p-4 sm:p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-full",children:[r.jsx("button",{id:"login-toggle-btn",className:"px-3 py-1 text-sm rounded-full transition "+("login"===x?"bg-white shadow text-slate-900":"text-slate-600 hover:text-slate-900"),onClick:()=>h("login"),"aria-pressed":"login"===x,children:f("auth.login")}),r.jsx("button",{id:"register-toggle-btn",className:"px-3 py-1 text-sm rounded-full transition "+("register"===x?"bg-white shadow text-slate-900":"text-slate-600 hover:text-slate-900"),onClick:()=>h("register"),"aria-pressed":"register"===x,children:"Sign Up"})]})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("label",{className:"block text-sm text-slate-700 mb-1",htmlFor:"email",children:f("auth.email")}),r.jsx("input",{id:"email",className:"w-full rounded-lg border px-3 py-2 outline-none transition focus:ring-2 focus:ring-blue-500 "+(e&&!y?"border-red-400 focus:ring-red-500":"border-slate-300"),placeholder:f("auth.email_placeholder"),value:e,onChange:e=>o(e.target.value),type:"email","aria-label":f("aria.email"),"aria-invalid":!!e&&!y}),e&&!y&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:f("auth.email_invalid")})]}),"register"===x&&r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("label",{className:"block text-sm text-slate-700 mb-1",htmlFor:"name",children:f("auth.name")}),r.jsx("input",{id:"name",className:"w-full rounded-lg border px-3 py-2 outline-none transition focus:ring-2 focus:ring-blue-500 "+(c&&!k?"border-red-400 focus:ring-red-500":"border-slate-300"),placeholder:f("auth.name_placeholder"),value:c,onChange:e=>m(e.target.value),"aria-label":f("aria.name"),"aria-invalid":!!c&&!k}),c&&!k&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:f("auth.name_required")})]}),r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("label",{className:"block text-sm text-slate-700 mb-1",htmlFor:"password",children:f("auth.password")}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password",className:"w-full rounded-lg border pr-10 px-3 py-2 outline-none transition focus:ring-2 focus:ring-blue-500 "+(n&&!_?"border-red-400 focus:ring-red-500":"border-slate-300"),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",type:w?"text":"password",value:n,onChange:e=>d(e.target.value),"aria-label":f("aria.password"),"aria-invalid":!!n&&!_}),r.jsx("button",{type:"button",className:"absolute inset-y-0 right-2 flex items-center px-2 text-slate-500 hover:text-slate-700","aria-label":"Show password while pressed",onMouseDown:()=>N(!0),onMouseUp:()=>N(!1),onMouseLeave:()=>N(!1),onTouchStart:()=>N(!0),onTouchEnd:()=>N(!1),onTouchCancel:()=>N(!1),children:r.jsx(l,{className:"w-4 h-4"})})]}),n&&!_&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:f("auth.password_invalid")})]})]}),p&&r.jsx("div",{className:"mt-3 text-sm "+("error"===p.type?"text-red-600":"text-green-600"),children:p.text}),r.jsx("div",{className:"mt-4 flex items-center justify-end gap-2",children:"register"===x?r.jsx("button",{disabled:!C||b,className:"px-4 py-2 rounded-lg text-white transition shadow "+(!C||b?"bg-slate-300 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"),onClick:g,"aria-label":f("aria.create_account"),children:f(b?"auth.creating_account":"auth.create_account")}):r.jsx("button",{disabled:!C||b,className:"px-4 py-2 rounded-lg text-white transition shadow "+(!C||b?"bg-slate-300 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"),onClick:u,"aria-label":f("aria.sign_in"),children:f(b?"auth.signing_in":"auth.sign_in")})})]})]})})}function d({size:e=36,withWordmark:t=!1}){const s=e;return r.jsxs("div",{className:"flex items-center gap-2 select-none",children:[r.jsxs("svg",{width:s,height:s,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg","aria-label":"RTRWH logo",children:[r.jsxs("defs",{children:[r.jsxs("linearGradient",{id:"lg1",x1:"0",x2:"1",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#2563eb"}),r.jsx("stop",{offset:"100%",stopColor:"#4f46e5"})]}),r.jsxs("linearGradient",{id:"lg2",x1:"0",x2:"0",y1:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#22c55e"}),r.jsx("stop",{offset:"100%",stopColor:"#0ea5e9"})]})]}),r.jsx("path",{d:"M32 6 C28 14 18 24 18 34 a14 14 0 0 0 28 0 c0-10-10-20-14-28z",fill:"url(#lg1)"}),r.jsxs("g",{transform:"translate(0,38)",children:[r.jsx("rect",{x:"10",y:"0",width:"44",height:"6",rx:"3",fill:"#94a3b8"}),r.jsx("rect",{x:"14",y:"8",width:"36",height:"6",rx:"3",fill:"#cbd5e1"}),r.jsx("rect",{x:"18",y:"16",width:"28",height:"6",rx:"3",fill:"url(#lg2)"})]}),r.jsx("circle",{cx:"44",cy:"14",r:"2",fill:"#93c5fd"})]}),t&&r.jsx("span",{className:"font-semibold tracking-tight text-slate-800",children:"RTRWH"})]})}function c(){const{t:l}=t(),i=s(),{login:c,register:m,isAuthenticated:x}=o(),[h,u]=a.useState(""),[g,b]=a.useState(""),[p,f]=a.useState(""),[j,v]=a.useState("login"),[w,N]=a.useState(!1),[y,_]=a.useState(null);function k(){return e(this,null,function*(){N(!0),_(null);try{(yield m(p.trim(),h.trim(),g))?(_({type:"success",text:l("auth.register_success")}),v("login")):_({type:"error",text:l("auth.register_failed")})}catch(e){_({type:"error",text:l("auth.register_failed")})}finally{N(!1)}})}function C(){return e(this,null,function*(){N(!0),_(null);try{(yield c(h.trim(),g))?(_({type:"success",text:l("auth.login_success")}),i("/dashboard")):_({type:"error",text:l("auth.login_failed")})}catch(e){_({type:"error",text:l("auth.login_failed")})}finally{N(!1)}})}return a.useEffect(()=>{x&&i("/dashboard")},[x,i]),a.useEffect(()=>{"register"===new URLSearchParams(window.location.search).get("mode")&&v("register")},[]),l("voice_commands.set_email"),l("voice_commands.set_password"),l("voice_commands.set_name"),l("voice_commands.switch_to_login"),l("voice_commands.switch_to_register"),l("voice_commands.login"),l("voice_commands.register"),l("voice_commands.go_home"),r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"max-w-6xl mx-auto px-6 py-8 flex justify-between items-center",children:r.jsx("a",{href:"/",className:"inline-flex items-center gap-2 text-slate-700 hover:text-slate-900","aria-label":l("aria.back_to_home"),children:r.jsx(d,{size:32,withWordmark:!0})})}),r.jsx("main",{className:"max-w-6xl mx-auto px-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[r.jsxs("div",{className:"order-2 lg:order-1",children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:l("auth.welcome")}),r.jsx("p",{className:"text-slate-600 mb-4",children:l("auth.welcome_subtitle")}),r.jsx(n,{email:h,setEmail:u,password:g,setPassword:b,name:p,setName:f,mode:j,setMode:e=>{v(e),_(null)},login:C,register:k,submitting:w,message:y})]}),r.jsx("div",{className:"order-1 lg:order-2",children:r.jsx("div",{className:"relative rounded-3xl overflow-hidden border border-slate-200 bg-white shadow-xl",children:r.jsxs("div",{className:"relative p-6",children:[r.jsx("div",{className:"h-64 sm:h-80 rounded-2xl bg-gradient-to-br from-blue-50 to-indigo-50 border border-slate-200 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl",children:"ðŸ”‘"}),r.jsx("div",{className:"mt-2 text-slate-700",children:l("auth.secure_access_title")})]})}),r.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3 text-sm text-slate-600",children:[r.jsx("div",{className:"rounded-lg border border-slate-200 p-3 bg-white",children:l("auth.feature_1")}),r.jsx("div",{className:"rounded-lg border border-slate-200 p-3 bg-white",children:l("auth.feature_2")}),r.jsx("div",{className:"rounded-lg border border-slate-200 p-3 bg-white",children:l("auth.feature_3")}),r.jsx("div",{className:"rounded-lg border border-slate-200 p-3 bg-white",children:l("auth.feature_4")})]})]})})})]})})]})}export{c as Auth,c as default};
