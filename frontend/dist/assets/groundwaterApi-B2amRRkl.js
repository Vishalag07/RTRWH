var t=Object.defineProperty,e=(e,i,a)=>((e,i,a)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[i]=a)(e,"symbol"!=typeof i?i+"":i,a),i=(t,e,i)=>new Promise((a,r)=>{var o=t=>{try{n(i.next(t))}catch(e){r(e)}},s=t=>{try{n(i.throw(t))}catch(e){r(e)}},n=t=>t.done?a(t.value):Promise.resolve(t.value).then(o,s);n((i=i.apply(t,e)).next())});const a={Clay:{primary:"#8B4513",secondary:"#A0522D",highlight:"#CD853F",shadow:"#654321"},"Clay Loam":{primary:"#A0522D",secondary:"#D2691E",highlight:"#F4A460",shadow:"#8B4513"},Loam:{primary:"#D2691E",secondary:"#F4A460",highlight:"#DEB887",shadow:"#A0522D"},"Sandy Loam":{primary:"#F4A460",secondary:"#DEB887",highlight:"#F5DEB3",shadow:"#D2691E"},Sandy:{primary:"#DEB887",secondary:"#F5DEB3",highlight:"#FFF8DC",shadow:"#F4A460"},Silt:{primary:"#BC8F8F",secondary:"#D2B48C",highlight:"#F0E68C",shadow:"#A0522D"},"Silt Loam":{primary:"#CD853F",secondary:"#DEB887",highlight:"#F5DEB3",shadow:"#A0522D"}};var r={};const o=new class{constructor(){e(this,"CORS_PROXY","https://api.allorigins.win/raw?url="),e(this,"TIMEOUT",1e4),e(this,"INDIA_WRIS_BASE","https://indiawris.gov.in"),e(this,"CGWB_BASE","https://cgwb.gov.in"),e(this,"NWIC_BASE","https://nwic.gov.in"),e(this,"INDIA_DATA_PORTAL","https://data.gov.in"),e(this,"USGS_BASE","https://waterservices.usgs.gov/nwis"),e(this,"OPENWEATHER_BASE","https://api.openweathermap.org/data/2.5"),e(this,"OPENWEATHER_API_KEY",r.VITE_OPENWEATHER_API_KEY||"demo_key")}fetchGroundwaterData(t,e){return i(this,null,function*(){const i=[()=>this.fetchFromIndiaWRIS(t,e),()=>this.fetchFromIndiaDataPortal(t,e),()=>this.fetchFromCGWB(t,e),()=>this.fetchFromUSGS(t,e),()=>this.fetchFromOpenWeather(t,e),()=>this.fetchFromMockData(t,e)];for(const t of i)try{const e=yield t();if(e.success&&e.data)return e}catch(a){continue}return this.fetchFromMockData(t,e)})}fetchFromIndiaWRIS(t,e){return i(this,null,function*(){try{const i=yield fetch(`${this.CORS_PROXY}${encodeURIComponent(`${this.INDIA_WRIS_BASE}/api/groundwater/levels?lat=${t}&lon=${e}`)}`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.TIMEOUT)});if(!i.ok)throw new Error(`India WRIS API error: ${i.status}`);const a=yield i.json();return{success:!0,data:{location:{name:a.station_name||this.getLocationName(t,e),lat:t,lon:e,state:a.state||this.getStateFromCoords(t,e),district:a.district,country:"India"},groundwater:{level_m:a.groundwater_level||this.generateRealisticDepth(t,e),depth_m:a.depth_to_water||this.generateRealisticDepth(t,e)+3,quality:a.quality||"Good",last_updated:a.last_updated||(new Date).toISOString(),source:"India WRIS"},aquifer:{type:a.aquifer_type||this.getAquiferType(t,e),material:a.aquifer_material||this.getAquiferMaterial(t,e),thickness_m:a.aquifer_thickness||this.getAquiferThickness(t,e),permeability:a.permeability||this.getPermeability(t,e),porosity:a.porosity||this.getPorosity(t,e),recharge_rate:a.recharge_rate||this.getRechargeRate(t,e)},soil:{type:a.soil_type||this.getSoilType(t,e),texture:a.soil_texture||this.getSoilTexture(t,e),depth_m:a.soil_depth||this.getSoilDepth(t,e),permeability:a.soil_permeability||this.getSoilPermeability(t,e),water_holding_capacity:a.water_capacity||this.getWaterHoldingCapacity(t,e),color:this.getSoilColor(this.getSoilType(t,e))},metadata:{data_source:"India WRIS",api_endpoint:"indiawris.gov.in",confidence:.9,last_fetched:(new Date).toISOString()}},source:"India WRIS"}}catch(i){return{success:!1,error:`India WRIS API error: ${i}`,source:"India WRIS"}}})}fetchFromIndiaDataPortal(t,e){return i(this,null,function*(){try{const i=yield fetch(`${this.CORS_PROXY}${encodeURIComponent(`${this.INDIA_DATA_PORTAL}/api/groundwater?lat=${t}&lon=${e}`)}`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.TIMEOUT)});if(!i.ok)throw new Error(`India Data Portal API error: ${i.status}`);const a=yield i.json();return{success:!0,data:{location:{name:a.location_name||this.getLocationName(t,e),lat:t,lon:e,state:a.state||this.getStateFromCoords(t,e),district:a.district,country:"India"},groundwater:{level_m:a.groundwater_level||this.generateRealisticDepth(t,e),depth_m:a.depth_to_water||this.generateRealisticDepth(t,e)+3,quality:a.quality||"Good",last_updated:a.last_updated||(new Date).toISOString(),source:"India Data Portal"},aquifer:{type:a.aquifer_type||this.getAquiferType(t,e),material:a.aquifer_material||this.getAquiferMaterial(t,e),thickness_m:a.aquifer_thickness||this.getAquiferThickness(t,e),permeability:a.permeability||this.getPermeability(t,e),porosity:a.porosity||this.getPorosity(t,e),recharge_rate:a.recharge_rate||this.getRechargeRate(t,e)},soil:{type:a.soil_type||this.getSoilType(t,e),texture:a.soil_texture||this.getSoilTexture(t,e),depth_m:a.soil_depth||this.getSoilDepth(t,e),permeability:a.soil_permeability||this.getSoilPermeability(t,e),water_holding_capacity:a.water_capacity||this.getWaterHoldingCapacity(t,e),color:this.getSoilColor(this.getSoilType(t,e))},metadata:{data_source:"India Data Portal",api_endpoint:"data.gov.in",confidence:.85,last_fetched:(new Date).toISOString()}},source:"India Data Portal"}}catch(i){return{success:!1,error:`India Data Portal API error: ${i}`,source:"India Data Portal"}}})}fetchFromCGWB(t,e){return i(this,null,function*(){try{const i=yield fetch(`${this.CORS_PROXY}${encodeURIComponent(`${this.CGWB_BASE}/api/aquifer-data?lat=${t}&lon=${e}`)}`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.TIMEOUT)});if(!i.ok)throw new Error(`CGWB API error: ${i.status}`);const a=yield i.json();return{success:!0,data:{location:{name:a.location_name||this.getLocationName(t,e),lat:t,lon:e,state:a.state||this.getStateFromCoords(t,e),district:a.district,country:"India"},groundwater:{level_m:a.groundwater_level||this.generateRealisticDepth(t,e),depth_m:a.depth_to_water||this.generateRealisticDepth(t,e)+3,quality:a.quality||"Good",last_updated:a.last_updated||(new Date).toISOString(),source:"CGWB"},aquifer:{type:a.aquifer_type||this.getAquiferType(t,e),material:a.aquifer_material||this.getAquiferMaterial(t,e),thickness_m:a.aquifer_thickness||this.getAquiferThickness(t,e),permeability:a.permeability||this.getPermeability(t,e),porosity:a.porosity||this.getPorosity(t,e),recharge_rate:a.recharge_rate||this.getRechargeRate(t,e)},soil:{type:a.soil_type||this.getSoilType(t,e),texture:a.soil_texture||this.getSoilTexture(t,e),depth_m:a.soil_depth||this.getSoilDepth(t,e),permeability:a.soil_permeability||this.getSoilPermeability(t,e),water_holding_capacity:a.water_capacity||this.getWaterHoldingCapacity(t,e),color:this.getSoilColor(this.getSoilType(t,e))},metadata:{data_source:"CGWB",api_endpoint:"cgwb.gov.in",confidence:.95,last_fetched:(new Date).toISOString()}},source:"CGWB"}}catch(i){return{success:!1,error:`CGWB API error: ${i}`,source:"CGWB"}}})}fetchFromUSGS(t,e){return i(this,null,function*(){try{const i=yield fetch(`${this.CORS_PROXY}${encodeURIComponent(`${this.USGS_BASE}/gwlevels/?format=json&bBox=${e-.1},${t-.1},${e+.1},${t+.1}`)}`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.TIMEOUT)});if(!i.ok)throw new Error(`USGS API error: ${i.status}`);const a=yield i.json();return{success:!0,data:{location:{name:a.site_name||this.getLocationName(t,e),lat:t,lon:e,country:"USA"},groundwater:{level_m:a.groundwater_level||this.generateRealisticDepth(t,e),depth_m:a.depth_to_water||this.generateRealisticDepth(t,e)+3,quality:a.quality||"Good",last_updated:a.date_time||(new Date).toISOString(),source:"USGS"},aquifer:{type:a.aquifer_type||this.getAquiferType(t,e),material:a.aquifer_material||this.getAquiferMaterial(t,e),thickness_m:a.aquifer_thickness||this.getAquiferThickness(t,e),permeability:a.permeability||this.getPermeability(t,e),porosity:a.porosity||this.getPorosity(t,e),recharge_rate:a.recharge_rate||this.getRechargeRate(t,e)},soil:{type:a.soil_type||this.getSoilType(t,e),texture:a.soil_texture||this.getSoilTexture(t,e),depth_m:a.soil_depth||this.getSoilDepth(t,e),permeability:a.soil_permeability||this.getSoilPermeability(t,e),water_holding_capacity:a.water_capacity||this.getWaterHoldingCapacity(t,e),color:this.getSoilColor(this.getSoilType(t,e))},metadata:{data_source:"USGS",api_endpoint:"waterservices.usgs.gov",confidence:.95,last_fetched:(new Date).toISOString()}},source:"USGS"}}catch(i){return{success:!1,error:`USGS API error: ${i}`,source:"USGS"}}})}fetchFromOpenWeather(t,e){return i(this,null,function*(){var i,a,r,o,s,n;try{const l=yield fetch(`${this.OPENWEATHER_BASE}/weather?lat=${t}&lon=${e}&appid=${this.OPENWEATHER_API_KEY}&units=metric`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.TIMEOUT)});if(!l.ok)throw new Error(`OpenWeather API error: ${l.status}`);const h=yield l.json();return{success:!0,data:{location:{name:h.name||this.getLocationName(t,e),lat:t,lon:e,country:(null==(i=h.sys)?void 0:i.country)||"Unknown"},groundwater:{level_m:10,depth_m:15,quality:"Good",last_updated:(new Date).toISOString(),source:"OpenWeather + Estimation"},aquifer:{type:"Unconfined",material:"Alluvial",thickness_m:20,permeability:.001,porosity:.3,recharge_rate:(null==(a=h.main)?void 0:a.humidity)?h.main.humidity/100:.5},soil:{type:this.estimateSoilType(null==(r=h.main)?void 0:r.humidity,null==(o=h.main)?void 0:o.temp),texture:"Medium",depth_m:2,permeability:1e-4,water_holding_capacity:.4,color:this.getSoilColor(this.estimateSoilType(null==(s=h.main)?void 0:s.humidity,null==(n=h.main)?void 0:n.temp))},metadata:{data_source:"OpenWeatherMap",api_endpoint:"api.openweathermap.org",confidence:.7,last_fetched:(new Date).toISOString()}},source:"OpenWeatherMap"}}catch(l){return{success:!1,error:`OpenWeather API error: ${l}`,source:"OpenWeatherMap"}}})}fetchFromMockData(t,e){return i(this,null,function*(){yield new Promise(t=>setTimeout(t,500));const i=this.getSoilType(t,e);return{success:!0,data:{location:{name:this.getLocationName(t,e),lat:t,lon:e,state:this.getStateFromCoords(t,e),country:"India"},groundwater:{level_m:this.generateRealisticDepth(t,e)+2*Math.sin(Date.now()/1e4),depth_m:this.generateRealisticDepth(t,e)+3,quality:"Good",last_updated:(new Date).toISOString(),source:"Mock Data"},aquifer:{type:this.getAquiferType(t,e),material:this.getAquiferMaterial(t,e),thickness_m:this.getAquiferThickness(t,e),permeability:this.getPermeability(t,e),porosity:this.getPorosity(t,e),recharge_rate:this.getRechargeRate(t,e)},soil:{type:i,texture:this.getSoilTexture(t,e),depth_m:this.getSoilDepth(t,e),permeability:this.getSoilPermeability(t,e),water_holding_capacity:this.getWaterHoldingCapacity(t,e),color:this.getSoilColor(i)},metadata:{data_source:"Mock Data",api_endpoint:"local",confidence:.5,last_fetched:(new Date).toISOString()}},source:"Mock Data"}})}getLocationName(t,e){const i=["Delhi","Mumbai","Bangalore","Chennai","Kolkata","Hyderabad","Pune","Ahmedabad","Jaipur","Surat","Lucknow","Kanpur","Nagpur","Indore","Thane","Bhopal"];return i[Math.floor(1e3*(t+e))%i.length]}getStateFromCoords(t,e){return t>28&&t<30&&e>76&&e<78?"Delhi":t>18&&t<20&&e>72&&e<74?"Maharashtra":t>12&&t<14&&e>77&&e<79?"Karnataka":t>12&&t<14&&e>79&&e<81?"Tamil Nadu":t>22&&t<24&&e>88&&e<90?"West Bengal":"Unknown"}generateRealisticDepth(t,e){const i=8+5*Math.sin(.1*t)+3*Math.cos(.1*e);return Math.max(2,Math.min(50,i))}getAquiferType(t,e){const i=["Unconfined","Confined","Semi-confined","Leaky"];return i[Math.floor(100*(t+e))%i.length]}getAquiferMaterial(t,e){const i=["Alluvial","Sandstone","Limestone","Granite","Basalt","Clay"];return i[Math.floor(200*(t+e))%i.length]}getAquiferThickness(t,e){return 15+10*Math.sin(.2*t)+5*Math.cos(.2*e)}getPermeability(t,e){return 1e-4+5e-4*Math.sin(.3*t)}getPorosity(t,e){return.2+.1*Math.sin(.4*t)}getRechargeRate(t,e){return.3+.2*Math.sin(.5*t)}getSoilType(t,e){const i=["Clay","Clay Loam","Loam","Sandy Loam","Sandy","Silt","Silt Loam"];return i[Math.floor(300*(t+e))%i.length]}getSoilTexture(t,e){const i=["Fine","Medium","Coarse"];return i[Math.floor(400*(t+e))%i.length]}getSoilDepth(t,e){return 1.5+.5*Math.sin(.6*t)}getSoilPermeability(t,e){return 1e-5+5e-5*Math.sin(.7*t)}getWaterHoldingCapacity(t,e){return.3+.1*Math.sin(.8*t)}getSoilColor(t){return{Clay:"#8B4513","Clay Loam":"#A0522D",Loam:"#D2691E","Sandy Loam":"#F4A460",Sandy:"#DEB887",Silt:"#BC8F8F","Silt Loam":"#CD853F"}[t]||"#8B7355"}estimateSoilType(t,e){return t&&e?t>70&&e>25?"Clay":t<40&&e>30?"Sandy":t>60&&e<20?"Clay Loam":"Loam":"Clay Loam"}};export{a as E,o as g};
